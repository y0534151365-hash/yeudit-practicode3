{"ast":null,"code":"import axios from \"axios\";\n\n// בסיס הכתובת של ה־API\naxios.defaults.baseURL = \"http://localhost:5211\";\n\n// מוסיפים את ה־token לכל בקשה אוטומטית\naxios.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n}, error => Promise.reject(error));\n\n// במקרה של שגיאה — אם זה 401 (לא מורשה) נעבור לדף login\naxios.interceptors.response.use(response => response, error => {\n  if (error.response && error.response.status === 401) {\n    console.warn(\"Session expired or unauthorized. Redirecting to login...\");\n    window.location = \"/login\";\n  } else {\n    console.error(\"Error in API call:\", error);\n  }\n  return Promise.reject(error);\n});\n\n// פונקציות גישה ל־API\nexport const getTasks = async () => {\n  const result = await axios.get(\"/tasks\");\n  return result.data;\n};\nexport const addTask = async task => {\n  const result = await axios.post(\"/tasks\", task);\n  return result.data;\n};\nexport const updateTask = async (id, task) => {\n  const result = await axios.put(`/tasks/${id}`, task);\n  return result.data;\n};\nexport const deleteTask = async id => {\n  const result = await axios.delete(`/tasks/${id}`);\n  return result.data;\n};\nexport default {\n  getTasks,\n  addTask,\n  updateTask,\n  deleteTask\n};\nlocalStorage.setItem(\"token\", res.data.token);","map":{"version":3,"names":["axios","defaults","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","status","console","warn","window","location","getTasks","result","get","data","addTask","task","post","updateTask","id","put","deleteTask","delete","setItem","res"],"sources":["C:/Users/user1/Desktop/תשפו/פרקטיקוד/practicode3/TodoApi/ToDoListReact/src/service.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\n// בסיס הכתובת של ה־API\r\naxios.defaults.baseURL = \"http://localhost:5211\";\r\n\r\n// מוסיפים את ה־token לכל בקשה אוטומטית\r\naxios.interceptors.request.use(\r\n  (config) => {\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\n// במקרה של שגיאה — אם זה 401 (לא מורשה) נעבור לדף login\r\naxios.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response && error.response.status === 401) {\r\n      console.warn(\"Session expired or unauthorized. Redirecting to login...\");\r\n      window.location = \"/login\";\r\n    } else {\r\n      console.error(\"Error in API call:\", error);\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// פונקציות גישה ל־API\r\nexport const getTasks = async () => {\r\n  const result = await axios.get(\"/tasks\");\r\n  return result.data;\r\n};\r\n\r\nexport const addTask = async (task) => {\r\n  const result = await axios.post(\"/tasks\", task);\r\n  return result.data;\r\n};\r\n\r\nexport const updateTask = async (id, task) => {\r\n  const result = await axios.put(`/tasks/${id}`, task);\r\n  return result.data;\r\n};\r\n\r\nexport const deleteTask = async (id) => {\r\n  const result = await axios.delete(`/tasks/${id}`);\r\n  return result.data;\r\n};\r\n\r\nexport default {\r\n  getTasks,\r\n  addTask,\r\n  updateTask,\r\n  deleteTask,\r\n};\r\n\r\nlocalStorage.setItem(\"token\", res.data.token);\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACAA,KAAK,CAACC,QAAQ,CAACC,OAAO,GAAG,uBAAuB;;AAEhD;AACAF,KAAK,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CAC3BC,MAAM,IAAK;EACV,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAE;IACTD,MAAM,CAACI,OAAO,CAACC,aAAa,GAAG,UAAUJ,KAAK,EAAE;EAClD;EACA,OAAOD,MAAM;AACf,CAAC,EACAM,KAAK,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CACjC,CAAC;;AAED;AACAZ,KAAK,CAACG,YAAY,CAACY,QAAQ,CAACV,GAAG,CAC5BU,QAAQ,IAAKA,QAAQ,EACrBH,KAAK,IAAK;EACT,IAAIA,KAAK,CAACG,QAAQ,IAAIH,KAAK,CAACG,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;IACnDC,OAAO,CAACC,IAAI,CAAC,0DAA0D,CAAC;IACxEC,MAAM,CAACC,QAAQ,GAAG,QAAQ;EAC5B,CAAC,MAAM;IACLH,OAAO,CAACL,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;EAC5C;EACA,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;;AAED;AACA,OAAO,MAAMS,QAAQ,GAAG,MAAAA,CAAA,KAAY;EAClC,MAAMC,MAAM,GAAG,MAAMtB,KAAK,CAACuB,GAAG,CAAC,QAAQ,CAAC;EACxC,OAAOD,MAAM,CAACE,IAAI;AACpB,CAAC;AAED,OAAO,MAAMC,OAAO,GAAG,MAAOC,IAAI,IAAK;EACrC,MAAMJ,MAAM,GAAG,MAAMtB,KAAK,CAAC2B,IAAI,CAAC,QAAQ,EAAED,IAAI,CAAC;EAC/C,OAAOJ,MAAM,CAACE,IAAI;AACpB,CAAC;AAED,OAAO,MAAMI,UAAU,GAAG,MAAAA,CAAOC,EAAE,EAAEH,IAAI,KAAK;EAC5C,MAAMJ,MAAM,GAAG,MAAMtB,KAAK,CAAC8B,GAAG,CAAC,UAAUD,EAAE,EAAE,EAAEH,IAAI,CAAC;EACpD,OAAOJ,MAAM,CAACE,IAAI;AACpB,CAAC;AAED,OAAO,MAAMO,UAAU,GAAG,MAAOF,EAAE,IAAK;EACtC,MAAMP,MAAM,GAAG,MAAMtB,KAAK,CAACgC,MAAM,CAAC,UAAUH,EAAE,EAAE,CAAC;EACjD,OAAOP,MAAM,CAACE,IAAI;AACpB,CAAC;AAED,eAAe;EACbH,QAAQ;EACRI,OAAO;EACPG,UAAU;EACVG;AACF,CAAC;AAEDvB,YAAY,CAACyB,OAAO,CAAC,OAAO,EAAEC,GAAG,CAACV,IAAI,CAACjB,KAAK,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}